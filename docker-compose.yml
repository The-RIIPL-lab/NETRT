version: '3.8'

services:
  netrt:
    build: .
    container_name: netrt_service
    restart: unless-stopped
    ports:
      # Maps the host port (left) to the container port (right) for the DICOM listener.
      # Ensure the right-side port (11116) matches the 'port' in your config.yaml.
      - "11116:11116"
    volumes:
      # Mounts the local config.yaml file as read-only into the container.
      # The container's CMD is set to look for the config at this path.
      - ./config.yaml:/app/config/config.yaml:ro

      # Mounts a local directory for the application's working data.
      # This path should correspond to the 'directories.working' path in your config.yaml,
      # but pointing to the path *inside* the container (e.g., /home/appuser/CNCT_working).
      - ./netrt_data/working:/home/appuser/CNCT_working

      # Mounts a local directory for persistent log files.
      # This path should correspond to the 'directories.logs' path in your config.yaml,
      # but pointing to the path *inside* the container (e.g., /home/appuser/CNCT_logs).
      - ./netrt_data/logs:/home/appuser/CNCT_logs

networks:
  default:
    driver: bridge
